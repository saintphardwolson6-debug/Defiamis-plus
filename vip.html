<!doctype html>
<html lang="fr">
<head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>Devenir VIP ‚Äî D√©fi-Amis+</title><link rel="stylesheet" href="assets/css/style.css"></head>
<body>
  <main class="page card centre">
    <h2>üëë Acc√®s VIP</h2>
    <p>Pour cr√©er un d√©fi personnalis√©, entre ton code VIP ou effectue le paiement via NatCash.</p>
    <p><strong>Montant :</strong> 50 HTG ‚Äî <strong>NatCash :</strong> <code>50955865621</code></p>
    <p>Support WhatsApp : <a href="https://wa.me/50936484174" target="_blank">+509 3648 4174</a></p>

    <label>Ton pr√©nom</label>
    <input id="vipName" placeholder="Ex : Tchoulo">

    <label>Code VIP (ou laisse vide pour demander paiement)</label>
    <input id="vipCode" placeholder="Ex : VIP-2025">

    <label>R√©f√©rence transaction (si pay√©)</label>
    <input id="vipTxn" placeholder="Ex : TXN-20251008-001">

    <div class="row">
      <button id="btnValidate" class="btn primary">Valider l'acc√®s VIP</button>
      <button class="btn ghost" onclick="location.href='index.html'">Retour</button>
    </div>

    <p class="small muted" id="vipStatus"></p>
  </main>

<script type="module">
import { requestVip } from './assets/js/script.js';
document.getElementById('btnValidate').onclick = async ()=>{
  const name = document.getElementById('vipName').value.trim();
  const code = document.getElementById('vipCode').value.trim();
  const txn = document.getElementById('vipTxn').value.trim();
  if(!name) return alert('Entre ton pr√©nom.');
  // VIP master code
  if(code === 'VIP-2025'){
    const v = JSON.parse(localStorage.getItem('vipUsers')||'{}');
    v[name]=true;
    localStorage.setItem('vipUsers', JSON.stringify(v));
    alert('‚úÖ Code VIP valide ‚Äî acc√®s VIP activ√©.');
    location.href = 'creer-defi.html';
    return;
  }
  if(txn){
    await requestVip(name, txn);
    document.getElementById('vipStatus').textContent = "Demande envoy√©e ‚Äî l'administrateur validera la transaction.";
    return;
  }
  alert('Code invalide ou transaction manquante. Si tu as pay√©, entre la r√©f√©rence TXN. Si tu as un code, entre-le.');
};
</script>
</body>
</html>
